<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>horror4</title>
  

</head>
<body>
<!-- partial:index.partial.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>I AM HORROR</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: black;
      color: red;
      font-family: monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
      overflow: hidden;
    }

    #title {
      font-size: 3em;
      cursor: pointer;
      user-select: none;
      position: relative;
      z-index: 2;
    }

    #achievement {
      margin-top: 20px;
      font-size: 1.2em;
      max-width: 90%;
      position: relative;
      z-index: 2;
    }

    .media-player {
      margin-top: 15px;
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      position: relative;
      z-index: 2;
    }

    .media-control {
      background: none;
      border: 1px solid red;
      color: red;
      padding: 5px 15px;
      cursor: pointer;
      font-family: monospace;
    }

    video {
      max-width: 90%;
      max-height: 50vh;
    }

    #game-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: black;
      z-index: 999;
    }

    #maze {
      position: relative;
      width: 400px;
      height: 400px;
      margin: 20px auto;
      border: 2px solid red;
    }

    .wall {
      position: absolute;
      background: red;
    }

    #player {
      position: absolute;
      width: 16px;
      height: 16px;
      background: white;
      transition: 0.1s;
    }

    #controls {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 5px;
    }

    .control-btn {
      width: 60px;
      height: 60px;
      background: rgba(255, 0, 0, 0.3);
      border: 1px solid red;
      color: white;
      font-size: 24px;
      cursor: pointer;
    }

    #gallery-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    #gallery-image {
      max-width: 80%;
      max-height: 70vh;
      border: 2px solid red;
    }

    #gallery-controls {
      margin-top: 20px;
      display: flex;
      gap: 20px;
    }

    .gallery-btn {
      background: none;
      border: 1px solid red;
      color: red;
      padding: 10px 20px;
      cursor: pointer;
      font-family: monospace;
      transition: opacity 0.3s;
    }

    .gallery-btn:hover {
      opacity: 0.7;
    }

    .arrow {
      position: absolute;
      font-size: 40px;
      color: red;
      animation: blink 1s infinite;
      z-index: 1001;
    }

    #click-label {
      position: absolute;
      color: red;
      font-size: 20px;
      animation: pulse 1s infinite;
      z-index: 1001;
    }

    .creepy-text {
      position: absolute;
      color: red;
      font-family: monospace;
      font-size: 24px;
      pointer-events: none;
      animation: float 5s infinite;
      text-shadow: 2px 2px black;
    }

    .pixel-smile {
      position: absolute;
      width: 20px;
      height: 20px;
      background: red;
      pointer-events: none;
      animation: glitch 2s infinite;
    }

    #survey-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1001;
      padding: 20px;
      box-sizing: border-box;
    }

    #survey-form {
      max-width: 500px;
      margin: 50px auto;
      border: 2px solid red;
      padding: 20px;
      background: black;
    }

    .survey-question {
      margin-bottom: 20px;
    }

    .survey-question label {
      display: block;
      margin-bottom: 10px;
      font-size: 1.1em;
    }

    .survey-input {
      width: 100%;
      padding: 8px;
      background: black;
      border: 1px solid red;
      color: red;
      font-family: monospace;
      margin-top: 5px;
    }

    #survey-submit {
      background: none;
      border: 1px solid red;
      color: red;
      padding: 10px 30px;
      cursor: pointer;
      font-family: monospace;
      margin-top: 20px;
      transition: opacity 0.3s;
    }

    #survey-submit:hover {
      opacity: 0.7;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    @keyframes glitch {
      0% { transform: translate(0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(-2px, -2px); }
      60% { transform: translate(2px, 2px); }
      80% { transform: translate(2px, -2px); }
      100% { transform: translate(0); }
    }
  </style>
</head>
<body>
  <div id="title">I AM HORROR</div>
  <div id="achievement"></div>

  <div id="audio-player" class="media-player">
    <button id="audio-control" class="media-control">⏸ PAUSE</button>
  </div>
  
  <div id="video-player" class="media-player">
    <video id="achievement-video">
      <source src="mesto.mp4" type="video/mp4">
    </video>
    <button id="video-control" class="media-control">⏸ PAUSE</button>
  </div>

  <div id="game-container">
    <div id="maze"></div>
    <div id="controls">
      <div></div>
      <button class="control-btn" data-direction="up">↑</button>
      <div></div>
      <button class="control-btn" data-direction="left">←</button>
      <div></div>
      <button class="control-btn" data-direction="right">→</button>
      <div></div>
      <button class="control-btn" data-direction="down">↓</button>
      <div></div>
    </div>
  </div>

  <div id="gallery-container">
    <img id="gallery-image" src="" alt="Gallery Image">
    <div id="gallery-controls">
      <button class="gallery-btn" id="prev-btn">← НАЗАД</button>
      <button class="gallery-btn" id="next-btn">ВПЕРЁД →</button>
    </div>
  </div>

  <div id="survey-container">
    <form id="survey-form" action="https://formcarry.com/s/RSqEeEbh5BW" method="POST">
      <input type="hidden" name="_gotcha">
      <div class="survey-question">
        <label>1. Стоит ли Вам верить во что-то большое?</label>
        <input type="text" name="question1" class="survey-input" required>
      </div>
      <div class="survey-question">
        <label>2. Чего вы боитесь?</label>
        <input type="text" name="question2" class="survey-input" required>
      </div>
      <div class="survey-question">
        <label>3. Телеграмм/Инстаграмм/Вконтакте для связи:</label>
        <input type="text" name="contacts" class="survey-input" required>
      </div>
      <div class="survey-question">
        <label>4. Готовы ли пойти на все ради ваших близких?</label>
        <textarea name="question4" class="survey-input" rows="4" required></textarea>
      </div>
      <button type="submit" id="survey-submit">ОТПРАВИТЬ В БЕЗДНУ</button>
    </form>
  </div>

  <audio id="bg-music" src="bipolar.mp3" autoplay loop hidden></audio>
  <audio id="achievement-music" src="iskra.mp3" hidden></audio>
  <video id="trap-video" src="veselo.mp4" hidden></video>

  <script>
    const achievements = [
      "Вы стали ближе к постоянному безумию..",
      "Задумайтесь, я когда то был таким же обычным, как и Вы..",
      "Может стоит уже забыть это место?",
      "Вам так не терпится узнать, что это все означает, не так ли?",
      "Правда есть постоянная ложь, истину глаголит лишь тот, чье тело неизмеримо",
      "Минутка молчания",
      "Столько мне давали, но столько же не ценили",
      "Если бы ваши мечты стали реальностью, где бы вы оказались?",
      "Ответив вчера на заданный вопрос, вы лишь приблизили себя к неминуемой системной гибели",
      "Проще говоря: Вы - маленькая молекула, в страшном пространстве восприятия",
      "Стоит ли терпеть эту глупую истину?",
      "Сейчас мы на пол-пути к разгадке мироздания",
      "А кто же он для Вас? этот беспомощный жалкий червяк, сочиняющий свою никчёмную музыку.",
      "Должен ли он жить или должен страдать? Решите этот вопрос каждый для себя сам.",
      "Мне даже его имя стыдно произносить, пусть будет раб М",
      "Он воплощения всего самого неприятного, что мог в него заложить Я",
      "А кто же Я? Следите за порядком вопросов, чтобы дать правильный ответ",
      "С самого детства Вы что-то/кого-то любили, самые любимые воспоминания из детства для себя вытащите, пожалуйста",
      "Я есть тот, кто создаёт эти воспоминания, какое же имя?!",
      "Метафорически - Создатель, по правде говоря, не очень люблю это имя, слишком величественно звучит... Ваши пожелания в моем прозвище?",
      "А чего Вы боялись в детстве, или сейчас, помните??",
      "Я также это все создал.",
      ".....",
      "Я - УЖАС 0000"
    ];

    const walls = [
      [0, 0, 400, 20], [0, 380, 400, 20], [0, 0, 20, 400], [380, 0, 20, 400],
      [100, 0, 20, 200], [200, 200, 20, 200], [300, 100, 20, 300],
      [0, 100, 150, 20], [250, 100, 150, 20], [150, 300, 150, 20],
      [50, 200, 20, 150], [150, 150, 150, 20], [250, 250, 20, 150],
      [50, 50, 20, 100], [350, 50, 20, 100], [50, 350, 20, 30],
      [330, 350, 20, 30], [200, 50, 20, 100], [200, 250, 20, 100]
    ];

    const galleryImages = ['horr1.jpg', 'horr2.jpg', 'horr3.jpg', 'horr4.jpg'];
    const creepyPhrases = [
      "Delete This Album",
      "Death",
      "Я - ПРОКЛЯТ",
      "ТОТАЛЬНАЯ ДЕПРЕССИЯ",
      "26 TTT"
    ];

    let playerPos = {x: 30, y: 30};
    let isGameActive = false;
    let currentImageIndex = 0;
    let isChaosActive = false;

    // Инициализация игры
    const gameContainer = document.getElementById('game-container');
    const maze = document.getElementById('maze');
    const player = document.createElement('div');
    player.id = 'player';
    maze.appendChild(player);

    walls.forEach(wall => {
      const wallEl = document.createElement('div');
      wallEl.className = 'wall';
      wallEl.style.left = `${wall[0]}px`;
      wallEl.style.top = `${wall[1]}px`;
      wallEl.style.width = `${wall[2]}px`;
      wallEl.style.height = `${wall[3]}px`;
      maze.appendChild(wallEl);
    });

    function checkCollision(newX, newY) {
      const playerRect = {
        x: newX,
        y: newY,
        width: 16,
        height: 16
      };

      return Array.from(document.getElementsByClassName('wall')).some(wall => {
        const wallRect = wall.getBoundingClientRect();
        return !(playerRect.x + playerRect.width <= wallRect.left ||
                playerRect.x >= wallRect.left + wallRect.width ||
                playerRect.y + playerRect.height <= wallRect.top ||
                playerRect.y >= wallRect.top + wallRect.height);
      });
    }

    function movePlayer(direction) {
      if (!isGameActive) return;

      let newX = playerPos.x;
      let newY = playerPos.y;
      const step = 5;

      switch(direction) {
        case 'up': newY -= step; break;
        case 'down': newY += step; break;
        case 'left': newX -= step; break;
        case 'right': newX += step; break;
      }

      if (!checkCollision(newX, newY)) {
        playerPos = {x: newX, y: newY};
        player.style.transform = `translate(${newX}px, ${newY}px)`;
      } else {
        const trapVideo = document.getElementById('trap-video');
        isGameActive = false;
        gameContainer.style.display = 'none';
        trapVideo.play();
        trapVideo.style.display = 'block';
        trapVideo.addEventListener('ended', () => {
          trapVideo.style.display = 'none';
          bgMusic.play();
        });
      }
    }

    // Галерея
    const galleryContainer = document.getElementById('gallery-container');
    const galleryImage = document.getElementById('gallery-image');

    function showImage(index) {
      currentImageIndex = (index + galleryImages.length) % galleryImages.length;
      galleryImage.src = galleryImages[currentImageIndex];
    }

    function openGallery() {
      galleryContainer.style.display = 'flex';
      showImage(0);
      bgMusic.pause();
    }

    // Эффекты для 12 апреля
    function createArrow(x, y, rotation) {
      const arrow = document.createElement('div');
      arrow.className = 'arrow';
      arrow.style.left = `${x}px`;
      arrow.style.top = `${y}px`;
      arrow.style.transform = `rotate(${rotation}deg)`;
      arrow.innerHTML = '➤';
      document.body.appendChild(arrow);
    }

    function showClickLabel() {
      const label = document.createElement('div');
      label.id = 'click-label';
      label.textContent = 'CLICK';
      const rect = achievementBox.getBoundingClientRect();
      label.style.left = `${rect.left + rect.width + 20}px`;
      label.style.top = `${rect.top + rect.height/2}px`;
      document.body.appendChild(label);
    }

    function createCreepyText() {
      const text = document.createElement('div');
      text.className = 'creepy-text';
      text.style.left = `${Math.random() * 90}vw`;
      text.style.top = `${Math.random() * 90}vh`;
      text.textContent = creepyPhrases[Math.floor(Math.random() * creepyPhrases.length)];
      document.body.appendChild(text);
      
      setTimeout(() => text.remove(), 5000);
    }

    function createPixelSmile() {
      const smile = document.createElement('div');
      smile.className = 'pixel-smile';
      smile.style.left = `${Math.random() * 95}vw`;
      smile.style.top = `${Math.random() * 95}vh`;
      
      smile.innerHTML = `
        <div style="position:absolute;width:100%;height:100%;background:black;">
          <div style="position:absolute;width:14px;height:2px;background:red;top:4px;left:3px;"></div>
          <div style="position:absolute;width:2px;height:6px;background:red;top:10px;left:5px;"></div>
          <div style="position:absolute;width:2px;height:6px;background:red;top:10px;left:13px;"></div>
        </div>
      `;
      
      document.body.appendChild(smile);
      setTimeout(() => smile.remove(), 5000);
    }

    function startChaos() {
      isChaosActive = true;
      document.querySelectorAll('.arrow, #click-label').forEach(el => el.remove());
      
      const interval = setInterval(() => {
        if (!isChaosActive) clearInterval(interval);
        createCreepyText();
        createPixelSmile();
      }, 500);
    }

    // Основной код
    const startDate = new Date(2025, 3, 7);
    const today = new Date();
    const currentDate = new Date(today.getFullYear(), today.getMonth(), today.getDate());
    const normalizedStartDate = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());
    
    const timeDiff = currentDate.getTime() - normalizedStartDate.getTime();
    const dayIndex = Math.floor(timeDiff / (1000 * 3600 * 24));

    const title = document.getElementById("title");
    const achievementBox = document.getElementById("achievement");
    const bgMusic = document.getElementById("bg-music");
    const achievementMusic = document.getElementById("achievement-music");
    const achievementVideo = document.getElementById("achievement-video");
    const audioPlayer = document.getElementById("audio-player");
    const audioControl = document.getElementById("audio-control");
    const videoPlayer = document.getElementById("video-player");
    const videoControl = document.getElementById("video-control");
    const surveyContainer = document.getElementById('survey-container');

    let currentMedia = null;

    function handleMediaPlay(mediaElement) {
      bgMusic.pause();
      currentMedia = mediaElement;
    }

    function handleMediaPause() {
      if (!currentMedia) return;
      bgMusic.play();
      currentMedia = null;
    }

    achievementMusic.addEventListener('play', () => {
      handleMediaPlay(achievementMusic);
      audioControl.textContent = '⏸ PAUSE';
      audioPlayer.style.display = 'flex';
    });

    achievementMusic.addEventListener('pause', () => {
      handleMediaPause();
      audioControl.textContent = '▶ PLAY';
    });

    achievementMusic.addEventListener('ended', () => {
      audioPlayer.style.display = 'none';
      handleMediaPause();
    });

    achievementVideo.addEventListener('play', () => {
      handleMediaPlay(achievementVideo);
      videoControl.textContent = '⏸ PAUSE';
      videoPlayer.style.display = 'flex';
    });

    achievementVideo.addEventListener('pause', () => {
      videoControl.textContent = '▶ PLAY';
      handleMediaPause();
    });

    achievementVideo.addEventListener('ended', () => {
      videoPlayer.style.display = 'none';
      handleMediaPause();
    });

    audioControl.addEventListener('click', () => {
      achievementMusic.paused ? achievementMusic.play() : achievementMusic.pause();
    });

    videoControl.addEventListener('click', () => {
      achievementVideo.paused ? achievementVideo.play() : achievementVideo.pause();
    });

    document.addEventListener('keydown', (e) => {
      if (!isGameActive) return;
      const directions = {ArrowUp: 'up', ArrowDown: 'down', ArrowLeft: 'left', ArrowRight: 'right'};
      if (directions[e.key]) movePlayer(directions[e.key]);
    });

    document.querySelectorAll('.control-btn').forEach(btn => {
      btn.addEventListener('click', () => movePlayer(btn.dataset.direction));
    });

    document.getElementById('prev-btn').addEventListener('click', () => showImage(currentImageIndex - 1));
    document.getElementById('next-btn').addEventListener('click', () => showImage(currentImageIndex + 1));

    document.getElementById('survey-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const form = e.target;
      const formData = new FormData(form);
      
      try {
        const response = await fetch(form.action, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });

        const result = await response.json();
        
        if (result.status === 'success') {
          alert('Души приняты. Спасибо за доверие.');
          surveyContainer.style.display = 'none';
        } else {
          alert(`Ошибка: ${result.message || 'Неизвестная ошибка'}`);
        }
      } catch (error) {
        console.error('Ошибка:', error);
        alert('Темные силы мешают отправке. Попробуйте позже.');
      }
    });

    title.addEventListener("click", () => {
      if (dayIndex >= 0 && dayIndex < achievements.length) {
        achievementBox.textContent = achievements[dayIndex];
        
        achievementMusic.pause();
        achievementVideo.pause();
        audioPlayer.style.display = 'none';
        videoPlayer.style.display = 'none';
        gameContainer.style.display = 'none';
        galleryContainer.style.display = 'none';
        surveyContainer.style.display = 'none';
        isGameActive = false;
        isChaosActive = false;
        achievementBox.style.cursor = 'default';
        achievementBox.onclick = null;
        document.querySelectorAll('.arrow, #click-label, .creepy-text, .pixel-smile').forEach(el => el.remove());

        if (dayIndex === 1) { 
          achievementMusic.currentTime = 0;
          achievementMusic.play();
        } else if (dayIndex === 2) { 
          achievementVideo.currentTime = 0;
          achievementVideo.play();
        } else if (dayIndex === 3) {
          bgMusic.pause();
          gameContainer.style.display = 'block';
          playerPos = {x: 30, y: 30};
          player.style.transform = `translate(${playerPos.x}px, ${playerPos.y}px)`;
          isGameActive = true;
        } else if (dayIndex === 4) {
          openGallery();
        } else if (dayIndex === 5) {
          const rect = achievementBox.getBoundingClientRect();
          createArrow(rect.left - 40, rect.top + 15, 180);
          createArrow(rect.right + 20, rect.top + 15, 0);
          showClickLabel();
          achievementBox.style.cursor = 'pointer';
          achievementBox.onclick = startChaos;
        } else if (dayIndex === 6) {
          surveyContainer.style.display = 'block';
        } else {
          bgMusic.play();
        }
        
      } else if (dayIndex < 0) {
        achievementBox.textContent = "Ещё рано...";
      } else {
        achievementBox.textContent = "Вы дошли до предела.";
      }
    });

    document.addEventListener('click', () => bgMusic.play(), { once: true });

    bgMusic.volume = 0.25;
    achievementMusic.volume = 0.5;
  </script>
</body>
</html>
<!-- partial -->
  
</body>
</html>
